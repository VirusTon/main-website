<!DOCTYPE html>  
<html lang="ar">  
<head>  
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>  
  <title>Ù†Ù‚Ø·Ø© Ø¨Ù„Ø³ | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>  
  <style>  
    body {  
      direction: rtl;  
      font-family: Arial, sans-serif;  
      background: #f7f7f7;  
      display: flex;  
      justify-content: center;  
      align-items: center;  
      height: 100vh;  
    }  
    .container {  
      background: white;  
      padding: 2rem;  
      border-radius: 16px;  
      box-shadow: 0 0 10px rgba(0,0,0,0.1);  
      width: 90%;  
      max-width: 400px;  
    }  
    input, button {  
      width: 80%;  
      padding: 1rem;  
      margin: 0.5rem 0;  
      font-size: 1rem;  
      border-radius: 8px;  
      border: 1px solid #ccc;  
    }  
    button {  
      background-color: #007bff;  
      color: white;  
      border: none;
      width: 40%;
    }  
    #status {  
      margin-top: 1rem;  
      color: green;  
    }  
  </style>  
</head>  
<body>
  
  <div class="container">  
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>  
    <input type="text" id="userId" placeholder="Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (ID)">  
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">  
    <button onclick="loginOrRegister()">Ø¯Ø®ÙˆÙ„</button>  
    <div id="status"></div>

    <!-- Ø¥Ø¹Ù„Ø§Ù† -->
  <div style="text-align:center; margin: 10px 0;">
    <script type="text/javascript">
      atOptions = {
        'key' : '637282bc26477d3191a82e2037188c44',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/637282bc26477d3191a82e2037188c44/invoke.js"></script>
  </div> <!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§ -->
    
  </div>  
  
  <script>  
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwsfve3uGNbKhZM15VdakGcbmMLwOyZ3CrUQ3aKpzRjM_FRFVfb9NbPrR524dpITBhN/exec';  
  
    async function loginOrRegister() {  
      const userId = document.getElementById('userId').value.trim();  
      const password = document.getElementById('password').value.trim();  
      const status = document.getElementById('status');  
  
      if (!userId || !password) {  
        status.style.color = 'red';  
        status.innerText = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ø±Ù ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±.';  
        return;  
      }  
  
      status.innerText = '...Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚';  
  
      const params = new URLSearchParams();  
      params.append("action", "loginOrRegister");  
      params.append("id", userId);  
      params.append("password", password);  
  
      try {  
        const res = await fetch(`${scriptURL}?${params.toString()}`);  
        const result = await res.json();  
  
        if (result.status === "login_success") {  
          status.style.color = 'green';  
          status.innerText = 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…';  
          // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ø¤Ù‚ØªÙ‹Ø§  
          localStorage.setItem("userId", userId);  
          localStorage.setItem("password", password);  
          // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©  
          setTimeout(() => {  
            window.location.href = "dashboard.html";  
          }, 1000);  
        } else if (result.status === "register_success") {  
          status.style.color = 'blue';  
          status.innerText = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰';  
          localStorage.setItem("userId", userId);  
          localStorage.setItem("password", password);  
          setTimeout(() => {  
            window.location.href = "dashboard.html";  
          }, 1000);  
        } else {  
          status.style.color = 'red';  
          status.innerText = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø© âŒ';  
        }  
      } catch (e) {  
        status.style.color = 'red';  
        status.innerText = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.';  
      }  
    }  
  </script>  
</body>  
</html>
